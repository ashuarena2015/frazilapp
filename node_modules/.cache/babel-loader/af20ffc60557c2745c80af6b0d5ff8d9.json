{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/frazil-app/src/Profile/Profile.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom'; // import history from '../history';\n\nimport CameraPhoto, { FACING_MODES, IMAGE_TYPES } from 'jslib-html5-camera-photo';\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.cameraPhoto = null;\n    this.videoRef = React.createRef();\n    this.state = {\n      imagePreviewUrl: '',\n      uploadImgMsg: false,\n      currentUploadedImg: '',\n      dataUri: ''\n    };\n    this.cancelImgUpload = this.cancelImgUpload.bind(this);\n  }\n\n  componentDidMount() {\n    const _this$props$loginInfo = this.props.loginInfo,\n          loginEmail = _this$props$loginInfo.loginEmail,\n          loginId = _this$props$loginInfo.loginId;\n    const profileData = {\n      loginEmail,\n      loginId\n    };\n    this.props.getProfileInfo(profileData);\n    this.cameraPhoto = new CameraPhoto(this.videoRef.current);\n  }\n\n  startCamera(idealFacingMode, idealResolution) {\n    this.cameraPhoto.startCamera(idealFacingMode, idealResolution).then(() => {\n      console.log('camera is started !');\n    }).catch(error => {\n      console.error('Camera not started!', error);\n    });\n  }\n\n  startCameraMaxResolution(idealFacingMode) {\n    this.cameraPhoto.startCameraMaxResolution(idealFacingMode).then(() => {\n      console.log('camera is started !');\n    }).catch(error => {\n      console.error('Camera not started!', error);\n    });\n  }\n\n  takePhoto() {\n    const config = {\n      sizeFactor: 1\n    };\n    let dataUri = this.cameraPhoto.getDataUri(config);\n    this.setState({\n      dataUri\n    });\n  }\n\n  stopCamera() {\n    this.cameraPhoto.stopCamera().then(() => {\n      console.log('Camera stoped!');\n    }).catch(error => {\n      console.log('No camera to stop!:', error);\n    });\n  }\n\n  _handleImageChange(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      this.setState({\n        file: file,\n        imagePreviewUrl: reader.result,\n        uploadImgBtn: true,\n        cancelImg: true,\n        uploadImgMsg: false,\n        openImageSelector: false\n      });\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  _handleSubmit(e) {\n    e.preventDefault();\n\n    if (this.state.imagePreviewUrl) {\n      fetch('http://localhost/campaignmaker-php/profile-image.php', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: 'profile-image=' + this.state.imagePreviewUrl + '&user-id=' + this.props.profileInfo.user_id\n      }).then(response => {\n        return response.json();\n      }).then(json => {\n        if (json) {\n          this.setState({\n            uploadImgBtn: false,\n            cancelImg: false,\n            uploadImgMsg: true,\n            changePicOption: true,\n            openImageSelector: false,\n            currentUploadedImg: 'http://localhost/campaignmaker-php/' + json\n          });\n        }\n      });\n    }\n  }\n\n  cancelImgUpload() {\n    this.setState({\n      imagePreviewUrl: this.state.currentUploadedImg,\n      uploadImgBtn: false,\n      cancelImg: false,\n      changePicOption: true,\n      uploadImgMsg: false\n    });\n  }\n\n  render() {\n    const _ref = this.props.profileInfo || {},\n          name = _ref.name,\n          email = _ref.email,\n          mobile = _ref.mobile,\n          profile_img = _ref.profile_img,\n          user_id = _ref.user_id,\n          imageCamp = _ref.imageCamp,\n          smsCamp = _ref.smsCamp,\n          designCamp = _ref.designCamp;\n\n    const uploadImgMsg = this.state.uploadImgMsg;\n    let imagePreview;\n    const imagePreviewUrl = this.state.imagePreviewUrl;\n    const imagePath = 'http://localhost/campaignmaker-php/';\n    let prevProfileImg = profile_img;\n\n    if (imagePreviewUrl) {\n      imagePreview = React.createElement(\"img\", {\n        src: imagePreviewUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      });\n    } else {\n      imagePreview = React.createElement(\"img\", {\n        src: \"\".concat(imagePath).concat(prevProfileImg),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"profile__section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => {\n        let facingMode = FACING_MODES.ENVIRONMENT;\n        let idealResolution = {\n          width: 640,\n          height: 480\n        };\n        this.startCamera(facingMode, idealResolution);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \" Start environment facingMode resolution ideal 640 by 480 \"), React.createElement(\"button\", {\n      onClick: () => {\n        this.takePhoto();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \" Take photo \"), React.createElement(\"button\", {\n      onClick: () => {\n        this.stopCamera();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \" Stop \"), React.createElement(\"video\", {\n      ref: this.videoRef,\n      autoPlay: \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      alt: \"imgCamera\",\n      src: this.state.dataUri,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container vertical-center-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel panel-default transparent-bg-box profile-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, !name && React.createElement(\"div\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-spin fa-spinner fa-3x m-t-rg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"panel_section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"profile-img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, imagePreview, React.createElement(\"div\", {\n      className: \"photo-edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-camera\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      className: \"fileInput\",\n      type: \"file\",\n      onChange: e => this._handleImageChange(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"photo-camera\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-camera\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: () => {\n        let facingMode = FACING_MODES.ENVIRONMENT;\n        let idealResolution = {\n          width: 640,\n          height: 480\n        };\n        this.startCamera(facingMode, idealResolution);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"previewComponent text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: e => this._handleSubmit(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, uploadImgMsg && React.createElement(\"p\", {\n      className: \"show\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Profile picture upload successfully!\"), React.createElement(\"div\", {\n      className: \"btn-group\",\n      style: {\n        'margin-top': '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: this.state.uploadImgBtn ? \"btn btn-sm btn-success\" : \"hide\",\n      type: \"submit\",\n      onClick: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Upload\"), React.createElement(\"button\", {\n      onClick: this.cancelImgUpload,\n      className: this.state.cancelImg ? \"btn btn-sm btn-danger\" : \"hide\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Cancel\")))), React.createElement(\"div\", {\n      className: \"panel-row panel-row-group m-t-rg m-b-rg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-user fa-stack label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"label-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, name)), React.createElement(\"div\", {\n      className: \"row-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-envelope fa-stack label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"label-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, email)), React.createElement(\"div\", {\n      className: \"row-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-phone fa-stack label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"label-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, mobile))), React.createElement(\"div\", {\n      className: \"text-center m-b-lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/edit-profile/\".concat(user_id, \"/\"),\n      className: \"btn btn-purple-o\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"Edit profile\"))), React.createElement(\"div\", {\n      className: \"panel_section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel-row panel-row-group m-t-rg m-b-rg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      onClick: \"\",\n      className: \"row-item\",\n      style: {\n        'background': '#66a430',\n        'color': '#fff',\n        'border': 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-user fa-envelope fa-stack label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"label-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, \"Image campaigns\"), React.createElement(\"div\", {\n      className: \"counts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, imageCamp), React.createElement(\"span\", {\n      className: \"fa fa-stack fa-arrow-right goto-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      onClick: \"\",\n      className: \"row-item\",\n      style: {\n        'background': '#3065a4',\n        'color': '#fff',\n        'border': 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-comment fa-stack label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"label-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"SMS campaigns\"), React.createElement(\"div\", {\n      className: \"counts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, smsCamp), React.createElement(\"span\", {\n      className: \"fa fa-stack fa-arrow-right goto-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      onClick: \"\",\n      className: \"row-item\",\n      style: {\n        'background': '#e66730',\n        'color': '#fff',\n        'border': 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-paint-brush fa-stack label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"label-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Design campaigns\"), React.createElement(\"div\", {\n      className: \"counts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, designCamp), React.createElement(\"span\", {\n      className: \"fa fa-stack fa-arrow-right goto-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }))))))));\n  }\n\n}","map":{"version":3,"sources":["/Applications/MAMP/htdocs/frazil-app/src/Profile/Profile.jsx"],"names":["React","Component","Link","CameraPhoto","FACING_MODES","IMAGE_TYPES","Profile","constructor","props","cameraPhoto","videoRef","createRef","state","imagePreviewUrl","uploadImgMsg","currentUploadedImg","dataUri","cancelImgUpload","bind","componentDidMount","loginInfo","loginEmail","loginId","profileData","getProfileInfo","current","startCamera","idealFacingMode","idealResolution","then","console","log","catch","error","startCameraMaxResolution","takePhoto","config","sizeFactor","getDataUri","setState","stopCamera","_handleImageChange","e","preventDefault","reader","FileReader","file","target","files","onloadend","result","uploadImgBtn","cancelImg","openImageSelector","readAsDataURL","_handleSubmit","fetch","method","headers","body","profileInfo","user_id","response","json","changePicOption","render","name","email","mobile","profile_img","imageCamp","smsCamp","designCamp","imagePreview","imagePath","prevProfileImg","facingMode","ENVIRONMENT","width","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n// import history from '../history';\nimport CameraPhoto, { FACING_MODES, IMAGE_TYPES } from 'jslib-html5-camera-photo';\n\nexport default class Profile extends Component {\n\n  constructor(props) {\n    super(props);\n    this.cameraPhoto = null;\n    this.videoRef = React.createRef();\n    this.state = {\n      imagePreviewUrl: '',\n      uploadImgMsg: false,\n      currentUploadedImg: '',\n      dataUri: ''\n    }\n    this.cancelImgUpload = this.cancelImgUpload.bind(this);\n  }\n\n  componentDidMount(){\n    const { loginEmail, loginId } = this.props.loginInfo;\n    const profileData = {\n      loginEmail,\n      loginId\n    }\n    this.props.getProfileInfo(profileData);\n    this.cameraPhoto = new CameraPhoto(this.videoRef.current);\n  }\n\n  startCamera (idealFacingMode, idealResolution) {\n    this.cameraPhoto.startCamera(idealFacingMode, idealResolution)\n      .then(() => {\n        console.log('camera is started !');\n      })\n      .catch((error) => {\n        console.error('Camera not started!', error);\n      });\n  }\n \n  startCameraMaxResolution (idealFacingMode) {\n    this.cameraPhoto.startCameraMaxResolution(idealFacingMode)\n      .then(() => {\n        console.log('camera is started !');\n      })\n      .catch((error) => {\n        console.error('Camera not started!', error);\n      });\n  }\n \n  takePhoto () {\n    const config = {\n      sizeFactor: 1\n    };\n \n    let dataUri = this.cameraPhoto.getDataUri(config);\n    this.setState({ dataUri });\n  }\n \n  stopCamera () {\n    this.cameraPhoto.stopCamera()\n      .then(() => {\n        console.log('Camera stoped!');\n      })\n      .catch((error) => {\n        console.log('No camera to stop!:', error);\n      });\n  }\n\n  _handleImageChange(e) {\n    e.preventDefault();\n\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      this.setState({\n        file: file,\n        imagePreviewUrl: reader.result,\n        uploadImgBtn: true,\n        cancelImg: true,\n        uploadImgMsg: false,\n        openImageSelector: false\n      });\n    }\n\n    reader.readAsDataURL(file)\n  }\n\n  _handleSubmit(e) {\n    e.preventDefault();\n    if(this.state.imagePreviewUrl){\t\n          fetch('http://localhost/campaignmaker-php/profile-image.php', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          body: 'profile-image='+this.state.imagePreviewUrl+'&user-id='+this.props.profileInfo.user_id,\n          }).then(response => {\n            return response.json();\n          }).then(json => {\n                if(json){\n                  this.setState({\n                    uploadImgBtn: false,\n                    cancelImg: false,\n                    uploadImgMsg: true,\n                    changePicOption: true,\n                    openImageSelector: false,\n                    currentUploadedImg: 'http://localhost/campaignmaker-php/'+json\n                  })\n                }\n          });\n      }\n  }\n\n  cancelImgUpload(){\n    this.setState({\n        imagePreviewUrl: this.state.currentUploadedImg,\n        uploadImgBtn: false,\n        cancelImg: false,\n        changePicOption: true,\n        uploadImgMsg: false\n      });\n  }\n\n  render() {\n    const { name, email, mobile, profile_img, user_id,\n      imageCamp, smsCamp, designCamp } = this.props.profileInfo || {};\n\n    const { uploadImgMsg } = this.state;\n\n    let imagePreview;\n    const { imagePreviewUrl } = this.state;\n    const imagePath = 'http://localhost/campaignmaker-php/';\n    let prevProfileImg  = profile_img;\n    if (imagePreviewUrl) {\n      imagePreview = <img src={imagePreviewUrl} />;\n    } else {\n      imagePreview = <img src={`${imagePath}${prevProfileImg}`} />;\n    }\n\n    return(\n      <div className=\"profile__section\">\n        <button onClick={ () => {\n          let facingMode = FACING_MODES.ENVIRONMENT;\n          let idealResolution = { width: 640, height: 480 };\n          this.startCamera(facingMode, idealResolution);\n        }}> Start environment facingMode resolution ideal 640 by 480 </button>\n \n        {/* <button onClick={ () => {\n          let facingMode = FACING_MODES.USER;\n          this.startCamera(facingMode, {});\n        }}> Start user facingMode resolution default </button>\n \n        <button onClick={ () => {\n          let facingMode = FACING_MODES.USER;\n          this.startCameraMaxResolution(facingMode);\n        }}> Start user facingMode resolution maximum </button> */}\n \n        <button onClick={ () => {\n          this.takePhoto();\n        }}> Take photo </button>\n \n        <button onClick={ () => {\n          this.stopCamera();\n        }}> Stop </button>\n \n        <video\n          ref={this.videoRef}\n          autoPlay=\"true\"\n        />\n        <img\n          alt=\"imgCamera\"\n          src={this.state.dataUri}\n        />\n        <div className=\"container vertical-center-box\">\n          <div className=\"panel panel-default transparent-bg-box profile-page\">\n            <div className=\"panel-body\">\n              {!name && (<div className=\"text-center\">\n                <span className=\"fa fa-spin fa-spinner fa-3x m-t-rg\"></span>\n              </div>)}\n              <div className=\"panel_section\">\n                <div className=\"profile-img\">\n                  {imagePreview}\n                  <div className=\"photo-edit\">\n                    <span className=\"fa fa-camera\"></span>\n                    <input className=\"fileInput\" type=\"file\" onChange={(e)=>this._handleImageChange(e)} />\n                  </div>\n                  <div className=\"photo-camera\">\n                    <span className=\"fa fa-camera\"></span>\n                    <button onClick={ () => {\n                      let facingMode = FACING_MODES.ENVIRONMENT;\n                      let idealResolution = { width: 640, height: 480 };\n                      this.startCamera(facingMode, idealResolution);\n                    }}></button>\n                  </div>\n                </div>\n                <div className=\"previewComponent text-center\">\n                  <form onSubmit={(e)=>this._handleSubmit(e)}>\n                      {/*<a href=\"javascript:void(0)\" onClick={this.openImageSelector} className={!this.state.changePicOption ? \"hide\" : \"text-info m-t-xs\"}>Change picture</a>*/}\n                      {uploadImgMsg && <p className=\"show\">Profile picture upload successfully!</p>}\n                      <div className=\"btn-group\" style={{'margin-top':'5px'}}>\n                        <button className={this.state.uploadImgBtn ? \"btn btn-sm btn-success\" : \"hide\"} type=\"submit\" onClick=\"\">Upload</button>\n                        <button onClick={this.cancelImgUpload} className={this.state.cancelImg ? \"btn btn-sm btn-danger\" : \"hide\"}>Cancel</button>\n                      </div>\n                    </form>\n                </div>\n\n                <div className=\"panel-row panel-row-group m-t-rg m-b-rg\">\n                  <div className=\"row-item\">\n                    <span className=\"fa fa-user fa-stack label\"></span>\n                    <span className=\"label-value\">{name}</span>\n                  </div>\n                  <div className=\"row-item\">\n                    <span className=\"fa fa-envelope fa-stack label\"></span>\n                    <span className=\"label-value\">{email}</span>\n                  </div>\n                  <div className=\"row-item\">\n                    <span className=\"fa fa-phone fa-stack label\"></span>\n                    <span className=\"label-value\">{mobile}</span>\n                  </div>\n                </div>\n\n                <div className=\"text-center m-b-lg\">\n                  <Link to={`/edit-profile/${user_id}/`} className=\"btn btn-purple-o\">Edit profile</Link>\n                </div>\n\n              </div>\n\n              <div className=\"panel_section\">\n\t\t    \t\t\t<div className=\"panel-row panel-row-group m-t-rg m-b-rg\">\n\t\t\t    \t\t\t<div onClick=\"\" className=\"row-item\" style={{'background':'#66a430', 'color': '#fff','border':'none'}}>\n\t\t\t    \t\t\t\t<span className=\"fa fa-user fa-envelope fa-stack label\"></span>\n\t\t\t    \t\t\t\t<span className=\"label-value\">Image campaigns</span>\n\t\t\t    \t\t\t\t<div className=\"counts\">{imageCamp}</div>\n\t\t\t    \t\t\t\t<span className=\"fa fa-stack fa-arrow-right goto-link\"></span>\n\t\t    \t\t\t\t</div>\n\t\t    \t\t\t\t<div onClick=\"\" className=\"row-item\" style={{'background':'#3065a4', 'color': '#fff','border':'none'}}>\n\t\t\t    \t\t\t\t<span className=\"fa fa-comment fa-stack label\"></span>\n\t\t\t    \t\t\t\t<span className=\"label-value\">SMS campaigns</span>\n\t\t\t    \t\t\t\t<div className=\"counts\">{smsCamp}</div>\n\t\t\t    \t\t\t\t<span className=\"fa fa-stack fa-arrow-right goto-link\"></span>\n\t\t    \t\t\t\t</div>\n\t\t    \t\t\t\t<div onClick=\"\" className=\"row-item\" style={{'background':'#e66730', 'color': '#fff','border':'none'}}>\n\t\t\t    \t\t\t\t<span className=\"fa fa-paint-brush fa-stack label\"></span>\n\t\t\t    \t\t\t\t<span className=\"label-value\">Design campaigns</span>\n\t\t\t    \t\t\t\t<div className=\"counts\">{designCamp}</div>\n\t\t\t    \t\t\t\t<span className=\"fa fa-stack fa-arrow-right goto-link\"></span>\n\t\t    \t\t\t\t</div>\n\t\t    \t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n              </div>\n              </div>\n      </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}